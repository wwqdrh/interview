## 主要指标

- 总内存：系统中实际的物理内存大小。
- 已用内存：已经被进程占用的内存。
- 空闲内存：尚未使用的物理内存。
- 交换分区（Swap）：当物理内存不足时，系统会将不常用的数据移到硬盘上的交换分区。过多使用交换空间会降低系统性能。
- 缓存与缓冲：缓存用于存储文件系统数据，缓冲用于存储即将写入磁盘的数据。

```cpp
{{#include ../../code/linuxsystem/stat/getmem.cpp}}
```

## 命令行工具

- free：查看内存使用情况，包括物理内存和交换内存。
  - 优化分析：通过 free 可以了解物理内存和交换空间的使用情况，如果交换分区的使用较多，可能需要增加物理内存或优化内存管理。
- vmstat：显示系统的虚拟内存使用、IO 负载、CPU 等。
  - 优化分析：通过 vmstat 可以了解内存分配和交换区的使用情况，帮助判断是否需要调整应用程序的内存使用。
- top / htop：显示占用内存最多的进程。
  - 优化分析：通过 top 查看内存消耗大户，识别内存泄漏或不必要的内存占用。

## 优化方案

- 释放缓存：通过执行 echo 3 > /proc/sys/vm/drop_caches 清理缓存，但要谨慎使用，避免影响系统性能。
- 调整交换分区大小：如果物理内存不足且频繁使用交换分区，可以增加交换分区的大小或增加物理内存。
- 优化内存使用：程序优化时应注意防止内存泄漏，确保释放不再使用的内存。
