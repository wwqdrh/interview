linux中获取cpu信息通过`/proc/stat`文件


## 主要指标

- CPU 使用率：衡量 CPU 的工作负载，通常显示为百分比。可以分为用户态（user space）、系统态（kernel space）和空闲态。
- 负载均值（Load Average）：代表一段时间内 CPU 的平均负载，通常会有 1 分钟、5 分钟和 15 分钟的负载均值。
- 进程状态：查看占用 CPU 资源最多的进程。


```cpp
{{#include ../../code/linuxsystem/stat/getcpu.cpp}}
```


## 命令行工具

- top / htop：实时显示系统运行状态，包括 CPU、内存、负载等。
  - 优化分析：可以通过 top 观察 CPU 使用率较高的进程，并针对性地进行优化。htop 是 top 的增强版，提供了更好的界面和交互性。
- mpstat：多核 CPU 的统计数据，显示每个 CPU 核心的使用情况。
  - 优化分析：通过查看单核和多核 CPU 的使用情况，可以判断是否需要优化程序的多线程性能。

## 优化方案

- 进程管理：如果某些进程占用 CPU 资源过多，可以通过 nice、renice 调整进程优先级，或者使用 kill 终止不必要的进程。
- 负载均衡：如果某些任务不需要立刻执行，可以通过 cron 或 at 将任务安排在系统负载较低时运行。
- 多线程优化：对于多核 CPU，可以优化程序的并行执行能力，使得任务分布在不同的 CPU 核心上，充分利用多核 CPU 性能
